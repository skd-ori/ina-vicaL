<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ina-vicaL</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="app-container">
        <!-- Results Sidebar (Fixed Left) -->
        <aside class="results-sidebar">
            <div class="sidebar-header">
                <h2>Results</h2>
                <button class="btn-copy" onclick="copyResults()" title="Copy Results">üìã</button>
            </div>

            <div class="sidebar-result calc-stats">
                <h3>Effective Stats<br><span class="subtitle">(Ë®àÁÆóÂÄ§)</span></h3>
                <div class="stats-column">
                    <div class="stat-mini">
                        <span class="mini-label">Kick</span>
                        <div class="result-value" id="calcKick">0</div>
                    </div>
                    <div class="stat-mini">
                        <span class="mini-label">Ctrl</span>
                        <div class="result-value" id="calcControl">0</div>
                    </div>
                </div>
            </div>

            <div class="sidebar-result">
                <h3>Character Power<br><span class="subtitle">(„Ç≠„É£„É©„Ç∑„É•„Éº„ÉàÂäõ)</span></h3>
                <div class="result-value" id="characterPower">0</div>
            </div>

            <div class="sidebar-result tech-power">
                <h3>Tech Power<br><span class="subtitle">(ÊäÄÂ®ÅÂäõ)</span></h3>
                <div class="result-value" id="techniquePowerDisplay">0</div>
            </div>

            <div class="sidebar-result total-box">
                <h3>Total AT<br><span class="subtitle">(„Éà„Éº„Çø„É´AT)</span></h3>
                <div class="result-value" id="totalAt">0</div>
            </div>

            <!-- Opponent & Result Section (New) -->
            <div class="sidebar-result total-box" id="battleResultBox"
                style="background: #f8fafc; border: 2px solid #cbd5e1; margin-top: 1rem;">
                <h3 style="color: #64748b; font-size: 0.9rem;">VS Opponent Power</h3>
                <input type="number" id="opponentPower" placeholder="Enter Power..."
                    style="width: 100%; padding: 0.5rem; font-size: 1.2rem; font-weight: bold; border: 2px solid #94a3b8; border-radius: 6px; text-align: center; color: #334155; margin-bottom: 0.5rem;"
                    oninput="calculate()">

                <div id="battleResultText"
                    style="text-align: center; font-size: 1.5rem; font-weight: 900; color: #cbd5e1; min-height: 2rem;">
                    ---
                </div>

                <div id="chainToggleContainer" style="margin-top: 0.5rem; text-align: center;">
                    <label
                        style="display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 600; color: #475569; cursor: pointer;">
                        <input type="checkbox" id="isChain" onchange="calculate()">
                        <span>üîó „ÉÅ„Çß„Ç§„É≥ÂßãÂãï (Chain)</span>
                    </label>
                    <div id="chainPowerInput" style="display:none; margin-top:0.2rem;">
                        <input type="number" id="chainPower" placeholder="1‰∫∫ÁõÆ„ÅÆÁµêÊûú (Auto)" oninput="calculate()"
                            style="width: 80%; padding: 0.2rem; text-align: center; border: 1px dashed #94a3b8; border-radius: 4px; margin-bottom: 0.2rem; background: #f1f5f9;"
                            readonly>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content (Right Aligned) -->
        <div class="content-wrapper">
            <header>
                <h1>‚öΩ ina-vicaL</h1>
            </header>

            <main class="main-content">
                <!-- Slot Selection (New) -->
                <!-- Slot Selection (6-Chain) -->
                <div class="mode-tabs"
                    style="margin-bottom: 0.5rem; border-bottom: 2px solid #e2e8f0; padding-bottom: 0.5rem; display: flex; overflow-x: auto;">
                    <button class="tab-btn active" id="btnSlot1" onclick="switchSlot(1)"
                        style="flex:1; border-radius: 8px 0 0 8px; min-width: 40px; padding: 0.5rem 0.2rem;">
                        <span style="font-size: 1rem;">1</span>
                    </button>
                    <button class="tab-btn" id="btnSlot2" onclick="switchSlot(2)"
                        style="flex:1; border-radius: 0; min-width: 40px; padding: 0.5rem 0.2rem;">
                        <span style="font-size: 1rem;">2</span>
                    </button>
                    <button class="tab-btn" id="btnSlot3" onclick="switchSlot(3)"
                        style="flex:1; border-radius: 0; min-width: 40px; padding: 0.5rem 0.2rem;">
                        <span style="font-size: 1rem;">3</span>
                    </button>
                    <button class="tab-btn" id="btnSlot4" onclick="switchSlot(4)"
                        style="flex:1; border-radius: 0; min-width: 40px; padding: 0.5rem 0.2rem;">
                        <span style="font-size: 1rem;">4</span>
                    </button>
                    <button class="tab-btn" id="btnSlot5" onclick="switchSlot(5)"
                        style="flex:1; border-radius: 0; min-width: 40px; padding: 0.5rem 0.2rem;">
                        <span style="font-size: 1rem;">5</span>
                    </button>
                    <button class="tab-btn" id="btnSlot6" onclick="switchSlot(6)"
                        style="flex:1; border-radius: 0 8px 8px 0; min-width: 40px; padding: 0.5rem 0.2rem;">
                        <span style="font-size: 1rem;">6</span>
                    </button>
                </div>

                <!-- Mode Selection (Tabs) -->
                <!-- Battle Mode Toggle (New) -->
                <div class="mode-tabs" style="background: #e0f2fe; margin-bottom: 0.5rem;">
                    <button class="tab-btn active" id="btnModeAT" onclick="setBattleMode('at')">‚öîÔ∏è Shoot (AT)</button>
                    <button class="tab-btn" id="btnModeDF" onclick="setBattleMode('df')">üõ°Ô∏è Defend (DF)</button>
                </div>
                <div class="mode-tabs">
                    <button class="tab-btn active" onclick="setMode('preset')" id="tab-preset">Preset Mode
                        („Éó„É™„Çª„ÉÉ„Éà)</button>
                    <button class="tab-btn" onclick="setMode('manual')" id="tab-manual">Direct Input (Áõ¥Êé•ÂÖ•Âäõ)</button>
                </div>
                <!-- Hidden inputs for mode compatibility if needed, but we will update JS to track state directly -->

                <!-- PRESET MODE -->
                <div id="presetContainer" class="mode-container">

                    <!-- NEW: Category Selector (Replacing Rarity) -->
                    <div class="input-group" style="margin-bottom: 1rem;">
                        <label for="presetCategory" class="label-small">Rarity („É¨„Ç¢„É™„ÉÜ„Ç£):</label>
                        <select id="presetCategory" style="display:none;" onchange="togglePresetCategory()">
                            <option value="standard">Legendary</option>
                            <option value="basara">BASARA (Future)</option>
                            <option value="hero">HERO (Future)</option>
                        </select>
                        <div class="segmented-control">
                            <button class="segment-btn active"
                                onclick="setSegment('presetCategory', 'standard', this); togglePresetCategory();">Legendary</button>
                            <button class="segment-btn"
                                onclick="setSegment('presetCategory', 'basara', this); togglePresetCategory();">BASARA</button>
                            <button class="segment-btn"
                                onclick="setSegment('presetCategory', 'hero', this); togglePresetCategory();">HERO</button>
                        </div>
                    </div>

                    <!-- Legendary Route Source -->
                    <div class="input-group hidden" id="legendaryRouteContainer"
                        style="margin-bottom: 1rem; background: #f0fdf4; padding: 0.5rem; border-radius: 6px; border: 1px solid #bbf7d0;">
                        <label style="color: #15803d;">Legendary Route</label>
                        <input type="hidden" id="legendaryRoute" value="1">
                        <div class="segmented-control">
                            <button class="segment-btn active"
                                onclick="setSegment('legendaryRoute', '1', this); updateLegendaryStats();">Route
                                1</button>
                            <button class="segment-btn"
                                onclick="setSegment('legendaryRoute', '2', this); updateLegendaryStats();">Route
                                2</button>
                        </div>
                    </div>

                    <!-- BASARA Route Source (Only visible for BASARA) -->
                    <div class="input-group hidden" id="basaraRouteContainer"
                        style="margin-bottom: 1rem; background: #fff1f2; padding: 0.5rem; border-radius: 6px; border: 1px solid #fecdd3;">
                        <label style="color: #be123c;">BASARA Route</label>
                        <input type="hidden" id="basaraRoute" value="1">
                        <div class="segmented-control">
                            <button class="segment-btn active"
                                onclick="setSegment('basaraRoute', '1', this); updateBasaraStats();">Route 1
                                (Physical)</button>
                            <button class="segment-btn"
                                onclick="setSegment('basaraRoute', '2', this); updateBasaraStats();">Route 2
                                (Tech)</button>
                        </div>
                    </div>

                    <div id="presets-standard" class="preset-group">
                        <span class="role-label fw"
                            style="font-weight:700; color:#ef4444; font-size:0.8rem; display:block; margin-bottom:0.2rem;">FW</span>
                        <div class="segmented-control" style="flex-wrap: wrap; margin-bottom: 0.5rem;">
                            <button class="segment-btn" onclick="setLegendaryChar('Ë±™ÁÇéÂØ∫ ‰øÆ‰πü', this, 'fw')">Ë±™ÁÇéÂØ∫ ‰øÆ‰πü</button>
                            <button class="segment-btn" onclick="setLegendaryChar('„Éè„É´', this, 'fw')">„Éè„É´</button>
                            <button class="segment-btn" onclick="setLegendaryChar('ÊüìÂ≤° Á´úÂêæ', this, 'fw')">ÊüìÂ≤° Á´úÂêæ</button>
                        </div>

                        <span class="role-label mf"
                            style="font-weight:700; color:#22c55e; font-size:0.8rem; display:block; margin-bottom:0.2rem;">MF</span>
                        <div class="segmented-control" style="flex-wrap: wrap; margin-bottom: 0.5rem;">
                            <button class="segment-btn" onclick="setLegendaryChar('È¨ºÈÅì Êúâ‰∫∫', this, 'mf')">È¨ºÈÅì Êúâ‰∫∫</button>
                            <button class="segment-btn" onclick="setLegendaryChar('Â§©È¶¨', this, 'shooter_mf')">Â§©È¶¨</button>
                            <button class="segment-btn" onclick="setLegendaryChar('„Ç¶„É´„Éì„ÉÄ', this, 'mf')">„Ç¶„É´„Éì„ÉÄ</button>
                        </div>

                        <span class="role-label df"
                            style="font-weight:700; color:#3b82f6; font-size:0.8rem; display:block; margin-bottom:0.2rem;">DF</span>
                        <div class="segmented-control" style="flex-wrap: wrap; margin-bottom: 0.5rem;">
                            <button class="segment-btn" onclick="setLegendaryChar('È¢®‰∏∏ ‰∏ÄÈÉéÂ§™', this, 'wall_df')">È¢®‰∏∏
                                ‰∏ÄÈÉéÂ§™</button>
                            <button class="segment-btn" onclick="setLegendaryChar('„ÉÜ„É¨„Çπ', this, 'wall_df')">„ÉÜ„É¨„Çπ</button>
                            <button class="segment-btn" onclick="setLegendaryChar('Ê†óÊùæ ÈâÑÂπ≥', this, 'focus_df')">Ê†óÊùæ
                                ÈâÑÂπ≥</button>
                        </div>

                        <span class="role-label gk"
                            style="font-weight:700; color:#eab308; font-size:0.8rem; display:block; margin-bottom:0.2rem;">GK</span>
                        <div class="segmented-control" style="flex-wrap: wrap; margin-bottom: 0.5rem;">
                            <button class="segment-btn" onclick="setLegendaryChar('ÂÜÜÂ†Ç ÂÆà', this, 'gk')">ÂÜÜÂ†Ç ÂÆà</button>
                            <button class="segment-btn" onclick="setLegendaryChar('Á´ãÂêëÂ±Ö', this, 'gk')">Á´ãÂêëÂ±Ö</button>
                            <button class="segment-btn" onclick="setLegendaryChar('„Ç∑„Çª„É≥„Éâ„Ç¶', this, 'gk')">„Ç∑„Çª„É≥„Éâ„Ç¶</button>
                        </div>
                    </div>

                    <!-- BASARA PRESETS -->
                    <div id="presets-basara" class="hidden">
                        <p style="font-size:0.8rem; color:#666; margin-bottom:0.5rem;">Select character to apply stats
                            from currently selected Route.</p>
                        <div style="margin-bottom: 0.5rem;">
                            <span class="role-label fw"
                                style="font-weight:700; color:#ef4444; font-size:0.8rem; display:block; margin-bottom:0.2rem;">FW</span>
                            <div class="segmented-control" style="flex-wrap: wrap; margin-bottom: 0.5rem;">
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('gouenji', this)">Ë±™ÁÇéÂØ∫</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('fubuki', this)">ÂêπÈõ™</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('gran', this)">„Ç∞„É©„É≥</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('fideo', this)">„Éï„Ç£„Éá„Ç£„Ç™</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('baddap', this)">„Éê„ÉÄ„ÉÉ„Éó</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('tsurugi', this)">Ââ£Âüé</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('hakuryuu', this)">ÁôΩÁ´ú</button>
                                <button class="segment-btn basara-btn" onclick="setBasaraChar('shu', this)">„Ç∑„É•„Ç¶</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('beta', this)">„Éô„Éº„Çø</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('ganma', this)">„Ç¨„É≥„Éû</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('zanark', this)">„Ç∂„Éä„Éº„ÇØ</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('saryuu', this)">„Çµ„É™„É•„Éº</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('haru', this)">ÂÜÜÂ†Ç„Éè„É´</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('sakurazaki', this)">Ê°úÂí≤</button>
                            </div>

                            <span class="role-label mf"
                                style="font-weight:700; color:#22c55e; font-size:0.8rem; display:block; margin-bottom:0.2rem;">MF</span>
                            <div class="segmented-control" style="flex-wrap: wrap; margin-bottom: 0.5rem;">
                                <button class="segment-btn basara-btn" onclick="setBasaraChar('fei', this)">„Éï„Çß„Ç§</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('tenma', this)">Â§©È¶¨</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('shindou', this)">Á•ûÁ´•</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('kidou', this)">È¨ºÈÅì</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('ichinose', this)">‰∏Ä‰πãÁÄ¨</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('aphrodi', this)">‰∫úÈ¢®ÁÇâ</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('fudou', this)">‰∏çÂãï</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('reize', this)">„É¨„Éº„Çº</button>
                            </div>

                            <span class="role-label df"
                                style="font-weight:700; color:#3b82f6; font-size:0.8rem; display:block; margin-bottom:0.2rem;">DF</span>
                            <div class="segmented-control" style="flex-wrap: wrap; margin-bottom: 0.5rem;">
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('kabeyama', this)">Â£ÅÂ±±</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('tobitaka', this)">È£õÈ∑π</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('kazemaru', this)">È¢®‰∏∏</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('kirino', this)">ÈúßÈáé</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('kinako', this)">ÈªÑÂêçÂ≠ê</button>
                            </div>

                            <span class="role-label gk"
                                style="font-weight:700; color:#eab308; font-size:0.8rem; display:block; margin-bottom:0.2rem;">GK</span>
                            <div class="segmented-control" style="flex-wrap: wrap;">
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('endou', this)">ÂÜÜÂ†Ç</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('tachimukai', this)">Á´ãÂêëÂ±Ö</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('desarm', this)">„Éá„Ç∂„Éº„É†</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('rococo', this)">„É≠„Ç≥„Ç≥</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('sangoku', this)">‰∏âÂõΩ</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('senguuji', this)">ÂçÉÂÆÆË∑Ø</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('ibuki', this)">‰∫ïÂêπ</button>
                                <button class="segment-btn basara-btn"
                                    onclick="setBasaraChar('shinsuke', this)">‰ø°Âä©</button>
                            </div>
                        </div>
                    </div>

                    <!-- HERO PRESETS (Placeholder) -->
                    <div id="presets-hero" class="preset-group hidden">
                        <div class="help-text"
                            style="padding: 1rem; text-align: center; border: 1px dashed var(--border);">
                            HERO Presets coming soon...
                        </div>
                    </div>

                    <hr class="separator">

                    <div class="preset-components">
                        <div class="stats-container">
                            <div class="stat-row">
                                <div class="stat-bean">
                                    <label for="kickBean" id="labelKickBean">Kick Beans (+0~82)</label>
                                    <div class="input-with-btn">
                                        <input type="number" id="kickBean" value="82" min="0" max="82">
                                        <button class="btn-small" onclick="setMaxBeans('kick')">Max</button>
                                        <button class="btn-small btn-clear"
                                            onclick="setClearBeans('kick')">Clear</button>
                                    </div>
                                </div>
                                <div class="stat-bean">
                                    <label for="controlBean" id="labelControlBean">Ctrl Beans (+0~82)</label>
                                    <div class="input-with-btn">
                                        <input type="number" id="controlBean" value="82" min="0" max="82">
                                        <button class="btn-small" onclick="setMaxBeans('control')">Max</button>
                                        <button class="btn-small btn-clear"
                                            onclick="setClearBeans('control')">Clear</button>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <hr class="separator">



                        <div class="stat-extras">
                            <span class="label-small">Equipment (Ë£ÖÂÇô)</span>
                            <div class="equip-grid">
                                <div class="input-group">
                                    <label>Shoes („Ç∑„É•„Éº„Ç∫)</label>
                                    <select id="equipBoots" style="display:none;">
                                        <!-- K,C,T,I,A,P,Pr -->
                                        <option value="0,0,0,0,0,0,0" selected>„Å™„Åó</option>
                                        <option value="35,35,0,0,0,0,0">„Çπ„Éë„Ç§„ÇØ„É¢„É≥„Çπ„Çø„Éº</option>
                                        <option value="31,29,0,0,0,0,0">„ÉÄ„Éº„ÇØ„Ç®„É≥„Éö„É©„Éº</option>
                                        <option value="0,30,28,0,0,0,0">„Ç®„É≥„Ç∑„Çß„É≥„ÉàD</option>
                                        <option value="0,0,25,28,0,0,0">„Ç∏„Çß„Éç„Ç∑„Çπ</option>
                                        <option value="0,0,0,0,0,28,26">„Éó„É≠„Éà„Ç≥„É´3.0</option>
                                        <option value="0,0,0,0,22,20,0">„É™„Éà„É´„ÇÆ„Ç¨„É≥„Éà</option>
                                    </select>
                                    <div class="segmented-control" style="flex-wrap: wrap;">
                                        <!-- AT Group -->
                                        <button class="segment-btn active at-equip"
                                            onclick="setSegment('equipBoots', '0,0,0,0,0,0,0', this)">„Å™„Åó</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipBoots', '35,35,0,0,0,0,0', this)">„Çπ„Éë„Ç§„ÇØM</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipBoots', '31,29,0,0,0,0,0', this)">„ÉÄ„Éº„ÇØE</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipBoots', '0,30,28,0,0,0,0', this)">„Ç®„É≥„Ç∑„Çß„É≥„ÉàD</button>

                                        <!-- DF Group -->
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipBoots', '0,0,25,28,0,0,0', this)">„Ç∏„Çß„Éç„Ç∑„Çπ</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipBoots', '0,0,0,0,0,28,26', this)">„Éó„É≠„Éà„Ç≥„É´</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipBoots', '0,0,0,0,22,20,0', this)">L„ÇÆ„Ç¨„É≥„Éà</button>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label>Bracelet („Éü„Çµ„É≥„Ç¨)</label>
                                    <select id="equipBracelet" style="display:none;">
                                        <option value="0,0,0,0,0,0,0" selected>„Å™„Åó</option>
                                        <option value="30,29,0,0,0,0,0">Ê∑±Ê∑µ„ÅÆ„Éü„Çµ„É≥„Ç¨</option>
                                        <option value="26,0,0,28,0,0,0">ÈáéÊúõ„ÅÆ„Éê„É≥„Ç∞„É´</option>
                                        <option value="0,0,18,0,22,0,0">ÊÖàÊÑõ„ÅÆ„Éê„É≥„Ç∞„É´</option>
                                        <option value="0,0,0,23,23,0,0">ÊúÄÊûú„Å¶„ÅÆ„Éê„É≥„Ç∞„É´</option>
                                        <option value="0,0,0,18,0,0,18">ÂΩ±„ÅÆ„Éê„É≥„Ç∞„É´</option>
                                        <option value="0,0,0,0,35,35,0">„Åò„ÅÑ„Å°„ÇÉ„Çì„ÅÆ„Ç∞„É≠„Éº„Éñ</option>
                                    </select>
                                    <div class="segmented-control" style="flex-wrap: wrap;">
                                        <!-- AT Group -->
                                        <button class="segment-btn active at-equip"
                                            onclick="setSegment('equipBracelet', '0,0,0,0,0,0,0', this)">„Å™„Åó</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipBracelet', '30,29,0,0,0,0,0', this)">Ê∑±Ê∑µ</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipBracelet', '26,0,0,28,0,0,0', this)">ÈáéÊúõ</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipBracelet', '0,0,18,0,22,0,0', this)">ÊÖàÊÑõ</button>

                                        <!-- DF Group -->
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipBracelet', '0,0,0,23,23,0,0', this)">ÊúÄÊûú„Å¶</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipBracelet', '0,0,0,18,0,0,18', this)">ÂΩ±</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipBracelet', '0,0,0,0,35,35,0', this)">„Åò„ÅÑ„Å°„ÇÉ„Çì</button>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label>Pendant („Éö„É≥„ÉÄ„É≥„Éà)</label>
                                    <select id="equipPendant" style="display:none;">
                                        <option value="0,0,0,0,0,0,0" selected>„Å™„Åó</option>
                                        <option value="30,40,0,0,0,0,0">ÁéãËÄÖ„ÅÆ„Éû„Éï„É©„Éº</option>
                                        <option value="29,29,0,0,0,0,0">„Ç®„Ç§„É™„Ç¢„Çπ„Éà„Éº„É≥</option>
                                        <option value="20,0,21,0,0,0,0">„Éó„É™„É≥„Çª„Çπ„Éû„É≥„Éà</option>
                                        <option value="0,0,19,21,0,0,0">Á¥∫Á¢ß„ÅÆÈ¶ñÈ£æ„Çä</option>
                                        <option value="0,0,0,25,0,0,24">ÂΩóÊòü„ÅÆ„Éö„É≥„ÉÄ„É≥„Éà</option>
                                        <option value="0,0,0,40,0,30,0">È¨ºÈÅì„ÅÆ„Éû„É≥„Éà</option>
                                        <option value="0,0,0,0,29,27,0">ÂÆàË≠∑ËÄÖ„ÅÆ„Éç„ÉÉ„ÇØ„É¨„Çπ</option>
                                    </select>
                                    <div class="segmented-control" style="flex-wrap: wrap;">
                                        <!-- AT Group -->
                                        <button class="segment-btn active at-equip"
                                            onclick="setSegment('equipPendant', '0,0,0,0,0,0,0', this)">„Å™„Åó</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipPendant', '30,40,0,0,0,0,0', this)">ÁéãËÄÖ</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipPendant', '29,29,0,0,0,0,0', this)">„Ç®„Ç§„É™„Ç¢</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipPendant', '20,0,21,0,0,0,0', this)">„Éó„É™„É≥„Çª„Çπ</button>

                                        <!-- DF Group -->
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipPendant', '0,0,19,21,0,0,0', this)">Á¥∫Á¢ß</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipPendant', '0,0,0,25,0,0,24', this)">ÂΩóÊòü</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipPendant', '0,0,0,40,0,30,0', this)">È¨ºÈÅì„Éû</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipPendant', '0,0,0,0,29,27,0', this)">ÂÆàË≠∑ËÄÖ</button>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label>Special („Çπ„Éö„Ç∑„É£„É´)</label>
                                    <select id="equipSpecial" style="display:none;">
                                        <option value="0,0,0,0,0,0,0" selected>„Å™„Åó</option>
                                        <option value="30,0,40,0,0,0,0">„Éö„Ç¨„Çµ„Çπ„ÅÆ„Ç∑„Éº„É´</option>
                                        <option value="23,22,0,0,0,0,0">„Ç™„É°„Ç¨„É™„É≥„Ç∞</option>
                                        <option value="0,28,30,0,0,0,0">È¨ºÈÅì„ÅÆ„Ç¥„Éº„Ç∞„É´</option>
                                        <option value="0,0,0,0,35,0,35">ÂÜÜÂ†ÇÂæ°ÂÆà</option>
                                        <option value="0,0,0,0,0,26,27">„É¨„Ç§„Éà„É≥ÊïôÊéà</option>
                                        <option value="0,0,0,21,17,0,0">Êñ∞Âûã„Çπ„Éù„Éº„ÉÑ„Ç∞„É©„Çπ</option>
                                    </select>
                                    <div class="segmented-control" style="flex-wrap: wrap;">
                                        <!-- AT Group -->
                                        <button class="segment-btn active at-equip"
                                            onclick="setSegment('equipSpecial', '0,0,0,0,0,0,0', this)">„Å™„Åó</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipSpecial', '30,0,40,0,0,0,0', this)">„Éö„Ç¨„Çµ„Çπ</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipSpecial', '23,22,0,0,0,0,0', this)">„Ç™„É°„Ç¨</button>
                                        <button class="segment-btn at-equip"
                                            onclick="setSegment('equipSpecial', '0,28,30,0,0,0,0', this)">È¨ºÈÅìG</button>

                                        <!-- DF Group -->
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipSpecial', '0,0,0,0,35,0,35', this)">ÂÜÜÂ†ÇÂæ°ÂÆà</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipSpecial', '0,0,0,0,0,26,27', this)">„É¨„Ç§„Éà„É≥</button>
                                        <button class="segment-btn df-equip"
                                            onclick="setSegment('equipSpecial', '0,0,0,21,17,0,0', this)">Êñ∞Âûã„Ç∞„É©„Çπ</button>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>

                <!-- MANUAL MODE -->
                <div id="manualContainer" class="mode-container hidden">
                    <h3>Direct Input (Áõ¥Êé•ÂÖ•Âäõ)</h3>
                    <p class="help-text">Enter total stats directly. Ignores Rarity/Beans/Equip.</p>
                    <div class="stats-container">
                        <div class="stat-row">
                            <div class="stat-main">
                                <label for="kickManual"><span class="icon">üëü</span> Total Kick</label>
                                <input type="number" id="kickManual" placeholder="Total" value="0">
                            </div>
                        </div>
                        <div class="stat-row">
                            <div class="stat-main">
                                <label for="controlManual"><span class="icon">üéØ</span> Total Control</label>
                                <input type="number" id="controlManual" placeholder="Total" value="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Common Matchup Section -->
                <section class="card input-section">
                    <h2>Matchup (Áõ∏ÊÄß)</h2>
                    <div class="input-group full-width">
                        <label>Character Matchup („Ç≠„É£„É©Áõ∏ÊÄß)</label>
                        <select id="charMatchup" style="display:none;">
                            <option value="1.0" selected>Normal</option>
                            <option value="1.2">Advantage</option>
                            <option value="0.8">Disadvantage</option>
                        </select>
                        <div class="segmented-control">
                            <button class="segment-btn" onclick="setSegment('charMatchup', '0.8', this)">‰∏çÂà©
                                (0.8)</button>
                            <button class="segment-btn active" onclick="setSegment('charMatchup', '1.0', this)">Á≠âÂÄç
                                (1.0)</button>
                            <button class="segment-btn" id="btnCharAdv"
                                onclick="setSegment('charMatchup', '1.2', this)">ÊúâÂà© (1.2)</button>
                        </div>
                    </div>
                </section>

                <section class="card input-section">
                    <h2>Technique (ÊäÄ)</h2>
                    <div class="input-group">
                        <label>Base Power (Âü∫Êú¨Â®ÅÂäõ)</label>
                        <select id="basePower" style="display:none;">
                            <option value="0">0 („Å™„Åó)</option>
                            <option value="30" selected>30</option>
                            <option value="50">50</option>
                            <option value="60">60</option>
                            <option value="70">70</option>
                            <option value="85">85</option>
                            <option value="100">100</option>
                        </select>
                        <div class="segmented-control" style="flex-wrap: wrap;">
                            <button class="segment-btn" onclick="setSegment('basePower', '0', this)">0 („Å™„Åó)</button>
                            <button class="segment-btn active" onclick="setSegment('basePower', '30', this)">30</button>
                            <button class="segment-btn" onclick="setSegment('basePower', '50', this)">50</button>
                            <button class="segment-btn" onclick="setSegment('basePower', '60', this)">60</button>
                            <button class="segment-btn" onclick="setSegment('basePower', '70', this)">70</button>
                            <button class="segment-btn" onclick="setSegment('basePower', '85', this)">85</button>
                            <button class="segment-btn" onclick="setSegment('basePower', '100', this)">100</button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Evolution (ÈÄ≤Âåñ)</label>
                        <select id="evolution" style="display:none;">
                            <option value="1" selected>Base</option>
                            <option value="2">V2</option>
                            <option value="3">V3</option>
                            <option value="4">V4</option>
                            <option value="5">A/GX</option>
                            <option value="6">GO</option>
                        </select>
                        <div class="segmented-control">
                            <button class="segment-btn active"
                                onclick="setSegment('evolution', '1', this)">Base</button>
                            <button class="segment-btn" onclick="setSegment('evolution', '2', this)">V2</button>
                            <button class="segment-btn" onclick="setSegment('evolution', '3', this)">V3</button>
                            <button class="segment-btn" onclick="setSegment('evolution', '4', this)">V4</button>
                            <button class="segment-btn" onclick="setSegment('evolution', '5', this)">GX</button>
                            <button class="segment-btn" onclick="setSegment('evolution', '6', this)">GO</button>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>Tech Matchup (ÊäÄÁõ∏ÊÄß)</label>
                        <select id="techMatchup" style="display:none;">
                            <option value="1.0" selected>Normal</option>
                            <option value="1.2">Advantage</option>
                            <option value="0.8">Disadvantage</option>
                        </select>
                        <div class="segmented-control">
                            <button class="segment-btn" onclick="setSegment('techMatchup', '0.8', this)">‰∏çÂà©
                                (0.8)</button>
                            <button class="segment-btn active" onclick="setSegment('techMatchup', '1.0', this)">Á≠âÂÄç
                                (1.0)</button>
                            <button class="segment-btn" id="btnTechAdv"
                                onclick="setSegment('techMatchup', '1.2', this)">ÊúâÂà©
                                (1.2)</button>
                        </div>
                    </div>
                </section>

                <section class="card input-section">
                    <h2>Bonuses</h2>
                    <div class="input-group">
                        <!-- Super Dimensional Moves -->
                        <div class="input-group">
                            <label>Super Dimensional Moves (Ë∂ÖÊ¨°ÂÖÉÊäÄ)</label>
                            <div class="segmented-control" id="superMoveControl"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.3rem;">
                                <button class="segment-btn active" onclick="setSuperMove('none', this)">„Å™„Åó</button>
                                <button class="segment-btn" onclick="setSuperMove('od', this)">„Ç™„Éº„Éê„Éº„Éâ„É©„Ç§„Éñ (+50%)</button>
                                <button class="segment-btn" onclick="setSuperMove('keshin', this)">ÂåñË∫´ (+40%)</button>
                                <button class="segment-btn" onclick="setSuperMove('armed', this)">„Ç¢„Éº„É†„Éâ
                                    (+20%/ÊäÄ1.5ÂÄç)</button>
                                <button class="segment-btn" onclick="setSuperMove('accel', this)">„Ç®„É¨„É°„É≥„Éà„Ç¢„ÇØ„Çª„É´
                                    (+30%)</button>
                                <button class="segment-btn" onclick="setSuperMove('boost30', this)">Boost‰ªñ
                                    (+30%)</button>
                            </div>

                        </div>

                        <!-- Manual Other -->
                        <div class="input-group">
                            <label for="multiplier">Other („Åù„ÅÆ‰ªñË£úÊ≠£)</label>
                            <div style="display:flex; gap:0.3rem; align-items:center; flex-wrap:wrap;">
                                <input type="number" id="multiplier" placeholder="0" value="0"
                                    style="flex:1; min-width:60px;" oninput="handleManualInput(this.value)">
                                <button class="btn-small" onclick="addManualBonus(10)">+10</button>
                                <button class="btn-small" onclick="addManualBonus(20)">+20</button>
                                <button class="btn-small" onclick="addManualBonus(30)">+30</button>
                                <button class="btn-small" onclick="clearBonuses()">Clr</button>
                                <button class="btn-small" id="btnTogglePassive"
                                    style="background:#f1f5f9; border:1px solid #cbd5e1; color:#333;"
                                    onclick="togglePassives()">Passives‚ñº</button>
                            </div>
                        </div>

                        <hr class="separator">

                        <!-- Passives Grid -->
                        <div class="input-group" id="passiveContainer" style="display:none;">
                            <div class="input-group"
                                style="display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:0.8rem; background:#f0f9ff; padding:0.5rem; border-radius:8px;">
                                <label style="width:100%; font-size:0.8rem; color:var(--primary);">Quick
                                    Presets:</label>
                                <button class="btn-small" onclick="applyPassivePreset('chain')">„ÉÅ„Çß„Ç§„É≥ÂßãÂãï (+10%)</button>
                                <button class="btn-small" onclick="applyPassivePreset('advantage')">ÊúâÂà©ÁâπÂåñ
                                    (Â±ûÊÄß+Pos+Âë®Âõ≤)</button>
                                <button class="btn-small" onclick="applyPassivePreset('max_justice')">Ê≠£Áæ©Max
                                    (+48)</button>
                                <button class="btn-small" onclick="applyPassivePreset('max_all_20')">All 20%
                                    (Test)</button>
                            </div>
                            <div class="passive-grid">
                                <!-- Team Passives -->
                                <div
                                    style="grid-column: 1 / -1; margin-top: 0.5rem; border-bottom: 2px solid #e0f2fe; padding-bottom: 0.2rem;">
                                    <span style="font-weight: 800; color: #0284c7; font-size: 0.85rem;">üîµ Team Passives
                                        („ÉÅ„Éº„É†ÂÖ±Êúâ - Constant)</span>
                                </div>

                                <div class="p-item"><label>ÂêåÂ±ûÊÄß„Ç∑„É•„Éº„Éà (Team Same)</label><input type="number"
                                        id="p_team_same" placeholder="0"></div>
                                <div class="p-item"><label>Áï∞Â±ûÊÄß„Ç∑„É•„Éº„Éà (Team Diff)</label><input type="number"
                                        id="p_team_diff" placeholder="0"></div>
                                <div class="p-item"><label>Âêå„Éù„Ç∏„Ç∑„É•„Éº„Éà (Team Pos)</label><input type="number"
                                        id="p_team_pos" placeholder="0"></div>
                                <div class="p-item"><label>Âë®Âõ≤„Ç∑„É•„Éº„Éà (Team Surr)</label><input type="number"
                                        id="p_team_surround" placeholder="0"></div>
                                <div class="p-item"><label>„Åø„Çì„Å™„Ç§„Ç±„Ç§„Ç± (Mood)</label><input type="number" id="p_mood"
                                        placeholder="0"></div>

                                <!-- Individual Passives -->
                                <div
                                    style="grid-column: 1 / -1; margin-top: 1rem; border-bottom: 2px solid #fecaca; padding-bottom: 0.2rem;">
                                    <span style="font-weight: 800; color: #dc2626; font-size: 0.85rem;">üî¥ Individual
                                        Passives (ÂÄã‰∫∫ - Variable)</span>
                                </div>

                                <div class="p-item"><label>Ê≠£Áæ© (Justice)</label><input type="number" id="p_justice"
                                        placeholder="0"></div>
                                <div class="p-item"><label>„Ç´„Ç¶„É≥„Çø„Éº (Counter)</label><input type="number" id="p_counter"
                                        placeholder="0"></div>
                                <div class="p-item"><label>„ÉÜ„É≥„Ç∑„Éß„É≥ (Tension)</label><input type="number" id="p_tension"
                                        placeholder="0"></div>
                                <div class="p-item"><label>„Ç≠„Ç∫„Éä (Kizuna)</label><input type="number" id="p_kizuna"
                                        placeholder="0"></div>
                                <div class="p-item"><label>ÊïµÈô£ (Enemy Terr)</label><input type="number" id="p_self_enemy"
                                        placeholder="0"></div>
                                <div class="p-item"><label>Âë®Âõ≤ÂêåÂ±ûÊÄß (Nearby Same)</label><input type="number"
                                        id="p_self_same" placeholder="0"></div>
                                <div class="p-item"><label>Âë®Âõ≤Áï∞Â±ûÊÄß (Nearby Diff)</label><input type="number"
                                        id="p_self_diff" placeholder="0"></div>
                                <div class="p-item"><label>ÂâçÂçäÊà¶ (1st Half)</label><input type="number" id="p_half_1"
                                        placeholder="0"></div>
                                <div class="p-item"><label>ÂæåÂçäÊà¶ (2nd Half)</label><input type="number" id="p_half_2"
                                        placeholder="0"></div>
                            </div>
                        </div>
                    </div>
                    <div class="checkbox-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="specialCond">
                            <span class="checkmark"></span>
                            Special Condition (Ëá≥ËøëË∑ùÈõ¢Á≠â)
                        </label>
                        <select id="specialCondValue" disabled>
                            <option value="1.1">1.1x</option>
                            <option value="1.2">1.2x</option>
                        </select>
                    </div>
                </section>
            </main>
            <footer style="text-align: center; padding: 2rem; color: var(--text-muted); font-size: 0.9rem;">
                <p>Created by @skd</p>
            </footer>
        </div> <!-- End content-wrapper -->
    </div> <!-- End app-container -->

    <!-- Load Data -->
    <script src="js/data.js"></script>
    <script src="js/state.js"></script>
    <script src="js/calc.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/legendary_stats.js"></script>
    <script src="js/main.js"></script>
</body>

</html>